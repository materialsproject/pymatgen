machine:
  timezone:
    America/Los_Angeles
  python:
    version: 2.7
  environment:
      PATH: $PATH:`pwd`/cmd_line/enum/Linux_64bit:`pwd`/cmd_line/bader/Linux_64bit:`pwd`/cmd_line/gulp/Linux_64bit:`pwd`/cmd_line/aconvasp/Linux_64bit
      GULP_LIB: /`pwd`/cmd_line/gulp/Libraries
      PYTHONPATH: $PYTHONPATH:/usr/lib/python2.7/dist-packages/
dependencies:
  override:
    - easy_install -U setuptools
    - pip install -q numpy
    - pip install -r requirements.txt
    - pip install -r requirements-optional.txt
    - python setup.py develop
test:
  override:
    - nosetests
deployment:
  py3:
    branch: master
    commands:
      - git config --global user.name "Py3k merger"
      - git config --global user.email ongsp@ucsd.edu
      - git checkout stable_py3
      - git pull
      - git merge master -m "Automatic Py3k merge for testing"
      - git push
