
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>pymatgen.analysis.defects.utils module &#8212; pymatgen 2018.7.15 documentation</title>
    <link rel="stylesheet" href="_static/proBlue.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
 
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-33990148-1']);
  _gaq.push(['_trackPageview']);
</script>

  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">pymatgen 2018.7.15 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-pymatgen.analysis.defects.utils">
<span id="pymatgen-analysis-defects-utils-module"></span><h1>pymatgen.analysis.defects.utils module<a class="headerlink" href="#module-pymatgen.analysis.defects.utils" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="pymatgen.analysis.defects.utils.ChargeDensityAnalyzer">
<em class="property">class </em><code class="descname">ChargeDensityAnalyzer</code><span class="sig-paren">(</span><em>chgcar</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/analysis/defects/utils.html#ChargeDensityAnalyzer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pymatgen.analysis.defects.utils.ChargeDensityAnalyzer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Analyzer to find potential interstitial sites based on charge density. The
<cite>total</cite> charge density is used.</p>
<p>Initialization.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>chgcar</strong> (<em>pmg.Chgcar</em>) – input Chgcar object.</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="pymatgen.analysis.defects.utils.ChargeDensityAnalyzer.charge_distribution_df">
<code class="descname">charge_distribution_df</code><a class="headerlink" href="#pymatgen.analysis.defects.utils.ChargeDensityAnalyzer.charge_distribution_df" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="pymatgen.analysis.defects.utils.ChargeDensityAnalyzer.cluster_nodes">
<code class="descname">cluster_nodes</code><span class="sig-paren">(</span><em>tol=0.2</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/analysis/defects/utils.html#ChargeDensityAnalyzer.cluster_nodes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pymatgen.analysis.defects.utils.ChargeDensityAnalyzer.cluster_nodes" title="Permalink to this definition">¶</a></dt>
<dd><p>Cluster nodes that are too close together using a tol.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>tol</strong> (<em>float</em>) – A distance tolerance. PBC is taken into account.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="pymatgen.analysis.defects.utils.ChargeDensityAnalyzer.extrema_df">
<code class="descname">extrema_df</code><a class="headerlink" href="#pymatgen.analysis.defects.utils.ChargeDensityAnalyzer.extrema_df" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="pymatgen.analysis.defects.utils.ChargeDensityAnalyzer.from_file">
<em class="property">classmethod </em><code class="descname">from_file</code><span class="sig-paren">(</span><em>chgcar_filename</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/analysis/defects/utils.html#ChargeDensityAnalyzer.from_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pymatgen.analysis.defects.utils.ChargeDensityAnalyzer.from_file" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="pymatgen.analysis.defects.utils.ChargeDensityAnalyzer.get_local_extrema">
<code class="descname">get_local_extrema</code><span class="sig-paren">(</span><em>find_min=True</em>, <em>threshold_frac=None</em>, <em>threshold_abs=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/analysis/defects/utils.html#ChargeDensityAnalyzer.get_local_extrema"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pymatgen.analysis.defects.utils.ChargeDensityAnalyzer.get_local_extrema" title="Permalink to this definition">¶</a></dt>
<dd><p>Get all local extrema fractional coordinates in charge density,
searching for local minimum by default. Note that sites are NOT grouped
symmetrically.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>find_min</strong> (<em>bool</em>) – True to find local minimum else maximum, otherwise
find local maximum.</li>
<li><strong>threshold_frac</strong> (<em>float</em>) – <p>optional fraction of extrema shown, which
returns <cite>threshold_frac * tot_num_extrema</cite> extrema fractional
coordinates based on highest/lowest intensity.</p>
<p>E.g. set 0.2 to show the extrema with 20% highest or lowest
intensity. Value range: 0 &lt;= threshold_frac &lt;= 1</p>
<p>Note that threshold_abs and threshold_frac should not set in the
same time.</p>
</li>
<li><strong>threshold_abs</strong> (<em>float</em>) – <p>optional filter. When searching for local
minima, intensity &lt;= threshold_abs returns; when searching for
local maxima, intensity &gt;= threshold_abs returns.</p>
<p>Note that threshold_abs and threshold_frac should not set in the
same time.</p>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><dl class="docutils">
<dt>list of fractional coordinates corresponding</dt>
<dd><p class="first last">to local extrema.</p>
</dd>
</dl>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">extrema_coords (list)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pymatgen.analysis.defects.utils.ChargeDensityAnalyzer.get_structure_with_nodes">
<code class="descname">get_structure_with_nodes</code><span class="sig-paren">(</span><em>find_min=True</em>, <em>min_dist=0.5</em>, <em>tol=0.2</em>, <em>threshold_frac=None</em>, <em>threshold_abs=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/analysis/defects/utils.html#ChargeDensityAnalyzer.get_structure_with_nodes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pymatgen.analysis.defects.utils.ChargeDensityAnalyzer.get_structure_with_nodes" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the modified structure with the possible interstitial sites added.
The species is set as a DummySpecie X.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>find_min</strong> (<em>bool</em>) – True to find local minimum else maximum, otherwise
find local maximum.</li>
<li><strong>min_dist</strong> (<em>float</em>) – The minimum distance (in Angstrom) that
a predicted site needs to be from existing atoms. A min_dist
with value &lt;= 0 returns all sites without distance checking.</li>
<li><strong>tol</strong> (<em>float</em>) – A distance tolerance of nodes clustering that sites too
closed to other predicted sites will be merged. PBC is taken
into account.</li>
<li><strong>threshold_frac</strong> (<em>float</em>) – <p>optional fraction of extrema, which returns
<cite>threshold_frac * tot_num_extrema</cite> extrema fractional
coordinates based on highest/lowest intensity.</p>
<p>E.g. set 0.2 to insert DummySpecie atom at the extrema with 20%
highest or lowest intensity.
Value range: 0 &lt;= threshold_frac &lt;= 1</p>
<p>Note that threshold_abs and threshold_frac should not set in the
same time.</p>
</li>
<li><strong>threshold_abs</strong> (<em>float</em>) – <p>optional filter. When searching for local
minima, intensity &lt;= threshold_abs returns; when searching for
local maxima, intensity &gt;= threshold_abs returns.</p>
<p>Note that threshold_abs and threshold_frac should not set in the
same time.</p>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">structure (Structure)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pymatgen.analysis.defects.utils.ChargeDensityAnalyzer.remove_collisions">
<code class="descname">remove_collisions</code><span class="sig-paren">(</span><em>min_dist=0.5</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/analysis/defects/utils.html#ChargeDensityAnalyzer.remove_collisions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pymatgen.analysis.defects.utils.ChargeDensityAnalyzer.remove_collisions" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove predicted sites that are too close to existing atoms in the
structure.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>min_dist</strong> (<em>float</em>) – The minimum distance (in Angstrom) that
a predicted site needs to be from existing atoms. A min_dist
with value &lt;= 0 returns all sites without distance checking.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pymatgen.analysis.defects.utils.QModel">
<em class="property">class </em><code class="descname">QModel</code><span class="sig-paren">(</span><em>beta=1.0</em>, <em>expnorm=0.0</em>, <em>gamma=1.0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/analysis/defects/utils.html#QModel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pymatgen.analysis.defects.utils.QModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">monty.json.MSONable</span></code></p>
<p>Model for the defect charge distribution.
A combination of exponential tail and gaussian distribution is used
(see Freysoldt (2011), DOI: 10.1002/pssb.201046289 )
q_model(r) = q [x exp(-r/gamma) + (1-x) exp(-r^2/beta^2)]</p>
<blockquote>
<div>without normalization constants</div></blockquote>
<p>By default, gaussian distribution with 1 Bohr width is assumed.
If defect charge is more delocalized, exponential tail is suggested.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>beta</strong> – Gaussian decay constant. Default value is 1 Bohr.
When delocalized (eg. diamond), 2 Bohr is more appropriate.</li>
<li><strong>expnorm</strong> – Weight for the exponential tail in the range of [0-1].
Default is 0.0 indicating no tail .
For delocalized charges ideal value is around 0.54-0.6.</li>
<li><strong>gamma</strong> – Exponential decay constant</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="pymatgen.analysis.defects.utils.QModel.rho_rec">
<code class="descname">rho_rec</code><span class="sig-paren">(</span><em>g2</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/analysis/defects/utils.html#QModel.rho_rec"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pymatgen.analysis.defects.utils.QModel.rho_rec" title="Permalink to this definition">¶</a></dt>
<dd><p>Reciprocal space model charge value
for input squared reciprocal vector.
:param g2: Square of reciprocal vector</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Charge density at the reciprocal vector magnitude</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="pymatgen.analysis.defects.utils.QModel.rho_rec_limit0">
<code class="descname">rho_rec_limit0</code><a class="headerlink" href="#pymatgen.analysis.defects.utils.QModel.rho_rec_limit0" title="Permalink to this definition">¶</a></dt>
<dd><p>Reciprocal space model charge value
close to reciprocal vector 0 .
rho_rec(g-&gt;0) -&gt; 1 + rho_rec_limit0 * g^2</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pymatgen.analysis.defects.utils.StructureMotifInterstitial">
<em class="property">class </em><code class="descname">StructureMotifInterstitial</code><span class="sig-paren">(</span><em>struct</em>, <em>inter_elem</em>, <em>motif_types=('tetrahedral'</em>, <em>'octahedral')</em>, <em>op_threshs=(0.3</em>, <em>0.5)</em>, <em>dl=0.2</em>, <em>doverlap=1</em>, <em>facmaxdl=1.01</em>, <em>verbose=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/analysis/defects/utils.html#StructureMotifInterstitial"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pymatgen.analysis.defects.utils.StructureMotifInterstitial" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Generate interstitial sites at positions
where the interstitialcy is coordinated by nearest neighbors
in a way that resembles basic structure motifs
(e.g., tetrahedra, octahedra).  The algorithm is called InFiT
(Interstitialcy Finding Tool), it was introducted by
Nils E. R. Zimmermann, Matthew K. Horton, Anubhav Jain,
and Maciej Haranczyk (Front. Mater., 4, 34, 2017),
and it is used by the Python Charged Defect Toolkit
(PyCDT: D. Broberg et al., Comput. Phys. Commun., in press, 2018).</p>
<p>Generates symmetrically distinct interstitial sites at positions
where the interstitial is coordinated by nearest neighbors
in a pattern that resembles a supported structure motif
(e.g., tetrahedra, octahedra).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>struct</strong> (<a class="reference internal" href="pymatgen.core.structure.html#pymatgen.core.structure.Structure" title="pymatgen.core.structure.Structure"><em>Structure</em></a>) – input structure for which symmetrically
distinct interstitial sites are to be found.</li>
<li><strong>inter_elem</strong> (<em>string</em>) – element symbol of desired interstitial.</li>
<li><strong>motif_types</strong> (<em>[</em><em>string</em><em>]</em>) – list of structure motif types that are
to be considered.  Permissible types are:
tet (tetrahedron), oct (octahedron).</li>
<li><strong>op_threshs</strong> (<em>[</em><em>float</em><em>]</em>) – threshold values for the underlying order
parameters to still recognize a given structural motif
(i.e., for an OP value &gt;= threshold the coordination pattern
match is positive, for OP &lt; threshold the match is
negative.</li>
<li><strong>dl</strong> (<em>float</em>) – grid fineness in Angstrom.  The input
structure is divided into a grid of dimension
a/dl x b/dl x c/dl along the three crystallographic
directions, with a, b, and c being the lengths of
the three lattice vectors of the input unit cell.</li>
<li><strong>doverlap</strong> (<em>float</em>) – distance that is considered
to flag an overlap between any trial interstitial site
and a host atom.</li>
<li><strong>facmaxdl</strong> (<em>float</em>) – factor to be multiplied with the maximum grid
width that is then used as a cutoff distance for the
clustering prune step.</li>
<li><strong>verbose</strong> (<em>bool</em>) – flag indicating whether (True) or not (False;
default) to print additional information to screen.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="pymatgen.analysis.defects.utils.StructureMotifInterstitial.enumerate_defectsites">
<code class="descname">enumerate_defectsites</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/analysis/defects/utils.html#StructureMotifInterstitial.enumerate_defectsites"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pymatgen.analysis.defects.utils.StructureMotifInterstitial.enumerate_defectsites" title="Permalink to this definition">¶</a></dt>
<dd><p>Get all defect sites.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><dl class="docutils">
<dt>list of periodic sites</dt>
<dd>representing the interstitials.</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">defect_sites ([<a class="reference internal" href="pymatgen.core.sites.html#pymatgen.core.sites.PeriodicSite" title="pymatgen.core.sites.PeriodicSite">PeriodicSite</a>])</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pymatgen.analysis.defects.utils.StructureMotifInterstitial.get_coordinating_elements_cns">
<code class="descname">get_coordinating_elements_cns</code><span class="sig-paren">(</span><em>i</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/analysis/defects/utils.html#StructureMotifInterstitial.get_coordinating_elements_cns"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pymatgen.analysis.defects.utils.StructureMotifInterstitial.get_coordinating_elements_cns" title="Permalink to this definition">¶</a></dt>
<dd><p>Get element-specific coordination numbers of defect with index i.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><dl class="docutils">
<dt>dictionary storing the coordination numbers (int)</dt>
<dd>with string representation of elements as keys.
(i.e., {elem1 (string): cn1 (int), …}).</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">elem_cn (dict)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pymatgen.analysis.defects.utils.StructureMotifInterstitial.get_defectsite_multiplicity">
<code class="descname">get_defectsite_multiplicity</code><span class="sig-paren">(</span><em>n</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/analysis/defects/utils.html#StructureMotifInterstitial.get_defectsite_multiplicity"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pymatgen.analysis.defects.utils.StructureMotifInterstitial.get_defectsite_multiplicity" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the symmtric multiplicity of the defect site at the index.</p>
</dd></dl>

<dl class="method">
<dt id="pymatgen.analysis.defects.utils.StructureMotifInterstitial.get_motif_type">
<code class="descname">get_motif_type</code><span class="sig-paren">(</span><em>i</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/analysis/defects/utils.html#StructureMotifInterstitial.get_motif_type"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pymatgen.analysis.defects.utils.StructureMotifInterstitial.get_motif_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the motif type of defect with index i (e.g., “tet”).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">motif type.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">motif (string)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pymatgen.analysis.defects.utils.StructureMotifInterstitial.get_op_value">
<code class="descname">get_op_value</code><span class="sig-paren">(</span><em>i</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/analysis/defects/utils.html#StructureMotifInterstitial.get_op_value"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pymatgen.analysis.defects.utils.StructureMotifInterstitial.get_op_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Get order-parameter value of defect with index i.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">OP value.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">opval (float)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pymatgen.analysis.defects.utils.StructureMotifInterstitial.make_supercells_with_defects">
<code class="descname">make_supercells_with_defects</code><span class="sig-paren">(</span><em>scaling_matrix</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/analysis/defects/utils.html#StructureMotifInterstitial.make_supercells_with_defects"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pymatgen.analysis.defects.utils.StructureMotifInterstitial.make_supercells_with_defects" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a sequence of supercells
in which each supercell contains a single interstitial,
except for the first supercell in the sequence
which is a copy of the defect-free input structure.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>scaling_matrix</strong> (<em>3x3 integer array</em>) – scaling matrix
to transform the lattice vectors.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">sequence of supercells.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">scs ([<a class="reference internal" href="pymatgen.core.structure.html#pymatgen.core.structure.Structure" title="pymatgen.core.structure.Structure">Structure</a>])</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pymatgen.analysis.defects.utils.TopographyAnalyzer">
<em class="property">class </em><code class="descname">TopographyAnalyzer</code><span class="sig-paren">(</span><em>structure</em>, <em>framework_ions</em>, <em>cations</em>, <em>tol=0.0001</em>, <em>max_cell_range=1</em>, <em>check_volume=True</em>, <em>constrained_c_frac=0.5</em>, <em>thickness=0.5</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/analysis/defects/utils.html#TopographyAnalyzer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pymatgen.analysis.defects.utils.TopographyAnalyzer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>This is a generalized module to perform topological analyses of a crystal
structure using Voronoi tessellations. It can be used for finding potential
interstitial sites. Applications including using these sites for
inserting additional atoms or for analyzing diffusion pathways.</p>
<p>Note that you typically want to do some preliminary postprocessing after
the initial construction. The initial construction will create a lot of
points, especially for determining potential insertion sites. Some helper
methods are available to perform aggregation and elimination of nodes. A
typical use is something like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">TopographyAnalyzer</span><span class="p">(</span><span class="n">structure</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;O&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;P&quot;</span><span class="p">])</span>
<span class="n">a</span><span class="o">.</span><span class="n">cluster_nodes</span><span class="p">()</span>
<span class="n">a</span><span class="o">.</span><span class="n">remove_collisions</span><span class="p">()</span>
</pre></div>
</div>
<p>Init.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>structure</strong> (<a class="reference internal" href="pymatgen.core.structure.html#pymatgen.core.structure.Structure" title="pymatgen.core.structure.Structure"><em>Structure</em></a>) – An initial structure.</li>
<li><strong>framework_ions</strong> (<em>[</em><em>str</em><em>]</em>) – A list of ions to be considered as a
framework. Typically, this would be all anion species. E.g.,
[“O”, “S”].</li>
<li><strong>cations</strong> (<em>[</em><em>str</em><em>]</em>) – A list of ions to be considered as non-migrating
cations. E.g., if you are looking at Li3PS4 as a Li
conductor, Li is a mobile species. Your cations should be [
“P”]. The cations are used to exclude polyhedra from
diffusion analysis since those polyhedra are already occupied.</li>
<li><strong>tol</strong> (<em>float</em>) – A tolerance distance for the analysis, used to
determine if something are actually periodic boundary images of
each other. Default is usually fine.</li>
<li><strong>max_cell_range</strong> (<em>int</em>) – This is the range of periodic images to
construct the Voronoi tesselation. A value of 1 means that we
include all points from (x +- 1, y +- 1, z+- 1) in the
voronoi construction. This is because the Voronoi poly
extends beyond the standard unit cell because of PBC.
Typically, the default value of 1 works fine for most
structures and is fast. But for really small unit
cells with high symmetry, you may need to increase this to 2
or higher.</li>
<li><strong>check_volume</strong> (<em>bool</em>) – Set False when ValueError always happen after
tuning tolerance.</li>
<li><strong>constrained_c_frac</strong> (<em>float</em>) – Constraint the region where users want
to do Topology analysis the default value is 0.5, which is the
fractional coordinate of the cell</li>
<li><strong>thickness</strong> (<em>float</em>) – Along with constrained_c_frac, limit the
thickness of the regions where we want to explore. Default is
0.5, which is mapping all the site of the unit cell.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="pymatgen.analysis.defects.utils.TopographyAnalyzer.analyze_symmetry">
<code class="descname">analyze_symmetry</code><span class="sig-paren">(</span><em>tol</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/analysis/defects/utils.html#TopographyAnalyzer.analyze_symmetry"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pymatgen.analysis.defects.utils.TopographyAnalyzer.analyze_symmetry" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="pymatgen.analysis.defects.utils.TopographyAnalyzer.check_volume">
<code class="descname">check_volume</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/analysis/defects/utils.html#TopographyAnalyzer.check_volume"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pymatgen.analysis.defects.utils.TopographyAnalyzer.check_volume" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="pymatgen.analysis.defects.utils.TopographyAnalyzer.cluster_nodes">
<code class="descname">cluster_nodes</code><span class="sig-paren">(</span><em>tol=0.2</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/analysis/defects/utils.html#TopographyAnalyzer.cluster_nodes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pymatgen.analysis.defects.utils.TopographyAnalyzer.cluster_nodes" title="Permalink to this definition">¶</a></dt>
<dd><p>Cluster nodes that are too close together using a tol.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>tol</strong> (<em>float</em>) – A distance tolerance. PBC is taken into account.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pymatgen.analysis.defects.utils.TopographyAnalyzer.get_structure_with_nodes">
<code class="descname">get_structure_with_nodes</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/analysis/defects/utils.html#TopographyAnalyzer.get_structure_with_nodes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pymatgen.analysis.defects.utils.TopographyAnalyzer.get_structure_with_nodes" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the modified structure with the voronoi nodes inserted. The
species is set as a DummySpecie X.</p>
</dd></dl>

<dl class="method">
<dt id="pymatgen.analysis.defects.utils.TopographyAnalyzer.print_stats">
<code class="descname">print_stats</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/analysis/defects/utils.html#TopographyAnalyzer.print_stats"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pymatgen.analysis.defects.utils.TopographyAnalyzer.print_stats" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="pymatgen.analysis.defects.utils.TopographyAnalyzer.remove_collisions">
<code class="descname">remove_collisions</code><span class="sig-paren">(</span><em>min_dist=0.5</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/analysis/defects/utils.html#TopographyAnalyzer.remove_collisions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pymatgen.analysis.defects.utils.TopographyAnalyzer.remove_collisions" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove vnodes that are too close to existing atoms in the structure</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>min_dist</strong> (<em>float</em>) – The minimum distance that a vertex needs to be
from existing atoms.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pymatgen.analysis.defects.utils.TopographyAnalyzer.vtk">
<code class="descname">vtk</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/analysis/defects/utils.html#TopographyAnalyzer.vtk"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pymatgen.analysis.defects.utils.TopographyAnalyzer.vtk" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="pymatgen.analysis.defects.utils.TopographyAnalyzer.write_topology">
<code class="descname">write_topology</code><span class="sig-paren">(</span><em>fname='Topo.cif'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/analysis/defects/utils.html#TopographyAnalyzer.write_topology"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pymatgen.analysis.defects.utils.TopographyAnalyzer.write_topology" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="pymatgen.analysis.defects.utils.VoronoiPolyhedron">
<em class="property">class </em><code class="descname">VoronoiPolyhedron</code><span class="sig-paren">(</span><em>lattice</em>, <em>frac_coords</em>, <em>polyhedron_indices</em>, <em>all_coords</em>, <em>name=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/analysis/defects/utils.html#VoronoiPolyhedron"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pymatgen.analysis.defects.utils.VoronoiPolyhedron" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Convenience container for a voronoi point in PBC and its associated polyhedron.</p>
<dl class="attribute">
<dt id="pymatgen.analysis.defects.utils.VoronoiPolyhedron.coordination">
<code class="descname">coordination</code><a class="headerlink" href="#pymatgen.analysis.defects.utils.VoronoiPolyhedron.coordination" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="pymatgen.analysis.defects.utils.VoronoiPolyhedron.is_image">
<code class="descname">is_image</code><span class="sig-paren">(</span><em>poly</em>, <em>tol</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/analysis/defects/utils.html#VoronoiPolyhedron.is_image"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pymatgen.analysis.defects.utils.VoronoiPolyhedron.is_image" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="pymatgen.analysis.defects.utils.VoronoiPolyhedron.volume">
<code class="descname">volume</code><a class="headerlink" href="#pymatgen.analysis.defects.utils.VoronoiPolyhedron.volume" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="pymatgen.analysis.defects.utils.calculate_vol">
<code class="descname">calculate_vol</code><span class="sig-paren">(</span><em>coords</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/analysis/defects/utils.html#calculate_vol"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pymatgen.analysis.defects.utils.calculate_vol" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="pymatgen.analysis.defects.utils.closestsites">
<code class="descname">closestsites</code><span class="sig-paren">(</span><em>struct_blk</em>, <em>struct_def</em>, <em>pos</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/analysis/defects/utils.html#closestsites"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pymatgen.analysis.defects.utils.closestsites" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns closest site to the input position
for both bulk and defect structures
:param struct_blk: Bulk structure
:param struct_def: Defect structure
:param pos: Position</p>
<p>Return: (site object, dist, index)</p>
</dd></dl>

<dl class="function">
<dt id="pymatgen.analysis.defects.utils.converge">
<code class="descname">converge</code><span class="sig-paren">(</span><em>f</em>, <em>step</em>, <em>tol</em>, <em>max_h</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/analysis/defects/utils.html#converge"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pymatgen.analysis.defects.utils.converge" title="Permalink to this definition">¶</a></dt>
<dd><p>simple newton itteration based convergence function</p>
</dd></dl>

<dl class="function">
<dt id="pymatgen.analysis.defects.utils.eV_to_k">
<code class="descname">eV_to_k</code><span class="sig-paren">(</span><em>energy</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/analysis/defects/utils.html#eV_to_k"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pymatgen.analysis.defects.utils.eV_to_k" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert energy to reciprocal vector magnitude k via hbar*k^2/2m
:param a: Energy in eV.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">(double) Reciprocal vector magnitude (units of 1/Bohr).</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pymatgen.analysis.defects.utils.generate_reciprocal_vectors_squared">
<code class="descname">generate_reciprocal_vectors_squared</code><span class="sig-paren">(</span><em>a1</em>, <em>a2</em>, <em>a3</em>, <em>encut</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/analysis/defects/utils.html#generate_reciprocal_vectors_squared"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pymatgen.analysis.defects.utils.generate_reciprocal_vectors_squared" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate reciprocal vector magnitudes within the cutoff along the specied
lattice vectors.
:param a1: Lattice vector a (in Bohrs)
:param a2: Lattice vector b (in Bohrs)
:param a3: Lattice vector c (in Bohrs)
:param encut: Reciprocal vector energy cutoff</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">[[g1^2], [g2^2], …] Square of reciprocal vectors (1/Bohr)^2
determined by a1, a2, a3 and whose magntidue is less than gcut^2.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pymatgen.analysis.defects.utils.genrecip">
<code class="descname">genrecip</code><span class="sig-paren">(</span><em>a1</em>, <em>a2</em>, <em>a3</em>, <em>encut</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pymatgen/analysis/defects/utils.html#genrecip"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pymatgen.analysis.defects.utils.genrecip" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>a2</strong><strong>, </strong><strong>a3</strong> (<em>a1</em><em>,</em>) – lattice vectors in bohr</li>
<li><strong>encut</strong> – energy cut off in eV</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">reciprocal lattice vectors with energy less than encut</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/pymatgen.analysis.defects.utils.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">pymatgen 2018.7.15 documentation</a> &#187;</li> 
      </ul>
    </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2011, Pymatgen Development Team.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.5.
    </div>
<div class="footer">This page uses <a href="http://analytics.google.com/">
Google Analytics</a> to collect statistics. You can disable it by blocking
the JavaScript coming from www.google-analytics.com.
<script type="text/javascript">
  (function() {
    var ga = document.createElement('script');
    ga.src = ('https:' == document.location.protocol ?
              'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    ga.setAttribute('async', 'true');
    document.documentElement.firstChild.appendChild(ga);
  })();
</script>
</div>

  </body>
</html>